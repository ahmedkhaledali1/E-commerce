(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[915],{3524:function(e,r,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/product/[slug]",function(){return t(5880)}])},4221:function(e,r,t){"use strict";t.d(r,{Z:function(){return i}});var n=t(5893),s=t(6749),a=t(7901),c=t(3342);t(7294);function i(e){var r=e.rating,t=e.numReviews;return(0,n.jsxs)("div",{className:"flex items-center text-amber-300",children:[r>=.5?(0,n.jsx)(a.Z,{className:"h-5 w-5"}):(0,n.jsx)(s.Z,{className:"h-5 w-5"}),r>=1.5?(0,n.jsx)(a.Z,{className:"h-5 w-5"}):(0,n.jsx)(s.Z,{className:"h-5 w-5"}),r>=2.5?(0,n.jsx)(a.Z,{className:"h-5 w-5"}):(0,n.jsx)(s.Z,{className:"h-5 w-5"}),r>=3.5?(0,n.jsx)(a.Z,{className:"h-5 w-5"}):(0,n.jsx)(s.Z,{className:"h-5 w-5"}),r>=4.5?(0,n.jsx)(a.Z,{className:"h-5 w-5"}):(0,n.jsx)(s.Z,{className:"h-5 w-5"})," ",t&&(0,n.jsxs)("a",{href:"#reviews",className:"flex ",children:[t," ",(0,n.jsx)(c.Z,{className:"h-5 w-5"})]})]})}},5880:function(e,r,t){"use strict";t.r(r),t.d(r,{__N_SSP:function(){return y},default:function(){return k}});var n=t(4051),s=t.n(n),a=t(5893),c=t(7294),i=t(5675),l=t(3399),o=t(9669),u=t.n(o),d=t(2148),m=t(6375),h=t(1163),x=t(1664),f=t(782),v=t(3299),j=t(4221),p=t(7536);function w(e,r,t,n,s,a,c){try{var i=e[a](c),l=i.value}catch(o){return void t(o)}i.done?r(l):Promise.resolve(l).then(n,s)}function g(e){return function(){var r=this,t=arguments;return new Promise((function(n,s){var a=e.apply(r,t);function c(e){w(a,n,s,c,i,"next",e)}function i(e){w(a,n,s,c,i,"throw",e)}c(void 0)}))}}function b(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function N(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{},n=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),n.forEach((function(r){b(e,r,t[r])}))}return e}var y=!0;function k(e){var r=(0,v.useSession)().data,t=(0,h.useRouter)(),n=(0,c.useContext)(d.y),o=n.state,w=n.dispatch,b=o.cart,y=e.product,k=(0,c.useState)([]),_=k[0],Z=k[1],P=(0,c.useState)(!1),S=P[0],E=P[1],O=function(){var e=g(s().mark((function e(r){var t,n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.rating,n=r.comment,E(!0),e.prev=2,e.next=5,u().post("/api/products/".concat(y._id,"/reviews"),{rating:t,comment:n});case 5:E(!1),f.Am.success("Review submitted successfully"),R(),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(2),E(!1),f.Am.error((0,m.b)(e.t0));case 14:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(r){return e.apply(this,arguments)}}(),R=(0,c.useCallback)(g(s().mark((function e(){var r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,y){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,u().get("/api/products/".concat(y._id,"/reviews"));case 5:r=e.sent.data,Z(r),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),f.Am.error((0,m.b)(e.t0));case 12:case"end":return e.stop()}}),e,null,[[0,9]])}))),[y]);(0,c.useEffect)((function(){R()}),[R]);var C=(0,p.cI)(),A=C.handleSubmit,I=C.register,L=C.formState.errors;if(!y)return(0,a.jsx)(l.Z,{children:(0,a.jsx)("h3",{className:"text-center",children:"404 : Product Not Found"})});var q=function(){var e=g(s().mark((function e(){var r,n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=b.cartItems.find((function(e){return e._id===y._id})),n=r?r.quantity+1:1,e.next=4,u().get("/api/products/".concat(y._id));case 4:if(!(e.sent.data.countInStock<n)){e.next=8;break}return f.Am.error("Sorry. Product is out of stock"),e.abrupt("return");case 8:w({type:"CART_ADD_ITEM",payload:N({},y,{quantity:n})}),t.push("/cart");case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,a.jsxs)(l.Z,{title:y.name,children:[(0,a.jsx)("div",{className:"py-2",children:(0,a.jsx)(x.default,{href:"/",children:"back to products"})}),(0,a.jsxs)("div",{className:"grid md:grid-cols-4 md:gap-3",children:[(0,a.jsx)("div",{className:"md:col-span-2",children:(0,a.jsx)(i.default,{src:y.image,alt:y.name,width:640,height:640,layout:"responsive"})}),(0,a.jsx)("div",{children:(0,a.jsxs)("ul",{children:[(0,a.jsx)("li",{children:(0,a.jsx)("h1",{className:"text-lg",children:y.name})}),(0,a.jsxs)("li",{children:["Category: ",y.category]}),(0,a.jsxs)("li",{children:["Brand: ",y.brand]}),(0,a.jsx)("li",{children:(0,a.jsx)(j.Z,{rating:y.rating,numReviews:y.numReviews})}),(0,a.jsxs)("li",{children:["Description: ",y.description]})]})}),(0,a.jsx)("div",{children:(0,a.jsxs)("div",{className:"card p-5",children:[(0,a.jsxs)("div",{className:"mb-2 flex justify-between",children:[(0,a.jsx)("div",{children:"Price"}),(0,a.jsxs)("div",{children:["$",y.price]})]}),(0,a.jsxs)("div",{className:"mb-2 flex justify-between",children:[(0,a.jsx)("div",{children:"Status"}),(0,a.jsx)("div",{children:y.countInStock>0?"In stock":"Unavailable"})]}),(0,a.jsx)("button",{className:"primary-button w-full",onClick:q,children:"Add to cart"})]})})]}),(0,a.jsxs)("div",{id:"reviews",className:"max-w-screen-md",children:[(0,a.jsx)("h2",{className:"mt-3 text-lg",children:"Customer Reviews"}),0===_.length&&(0,a.jsx)("div",{children:"No review found"}),(0,a.jsx)("ul",{children:_.map((function(e){return(0,a.jsx)("li",{children:(0,a.jsxs)("div",{className:"mt-3 p-3 shadow-inner dark:shadow-gray-700",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("strong",{children:e.name})," on"," ",e.createdAt.substring(0,10)]}),(0,a.jsx)(j.Z,{rating:e.rating}),(0,a.jsx)("div",{children:e.comment})]})},e._id)}))}),(0,a.jsx)("div",{className:"card mt-5 p-5",children:r?(0,a.jsxs)("form",{onSubmit:A(O),children:[(0,a.jsx)("h2",{className:"mb-4 text-lg",children:"Leave your review"}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{htmlFor:"comment",children:"Comment"}),(0,a.jsx)("textarea",N({className:"w-full",id:"comment"},I("comment",{required:"Please enter comment"}))),L.comment&&(0,a.jsx)("div",{className:"text-red-500",children:L.comment.message})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{htmlFor:"rating",children:"Rating"}),(0,a.jsxs)("select",N({id:"rating",className:"w-full"},I("rating",{required:"Please enter rating"}),{children:[(0,a.jsx)("option",{value:""}),["1 star","2 stars","3 stars","4 stars","5 stars"].map((function(e,r){return(0,a.jsx)("option",{value:r+1,children:e},r+1)}))]})),L.rating&&(0,a.jsx)("div",{className:"text-red-500 ",children:L.rating.message})]}),(0,a.jsx)("div",{className:"mb-4 ",children:(0,a.jsx)("button",{disabled:S,className:"primary-button",children:S?"Loading":"Submit"})})]}):(0,a.jsxs)("div",{children:["Please"," ",(0,a.jsx)(x.default,{href:"/login?redirect=/product/".concat(y.slug),children:"login"})," ","to write a review"]})})]})]})}},6749:function(e,r,t){"use strict";var n=t(7294);const s=n.forwardRef((function(e,r){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor","aria-hidden":"true",ref:r},e),n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"}))}));r.Z=s},3342:function(e,r,t){"use strict";var n=t(7294);const s=n.forwardRef((function(e,r){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:r},e),n.createElement("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"}))}));r.Z=s},7901:function(e,r,t){"use strict";var n=t(7294);const s=n.forwardRef((function(e,r){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:r},e),n.createElement("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"}))}));r.Z=s}},function(e){e.O(0,[961,859,536,675,399,774,888,179],(function(){return r=3524,e(e.s=r);var r}));var r=e.O();_N_E=r}]);