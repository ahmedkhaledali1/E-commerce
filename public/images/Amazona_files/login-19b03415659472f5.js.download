(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[459],{7156:function(e,r,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/login",function(){return n(4754)}])},4754:function(e,r,n){"use strict";n.r(r),n.d(r,{default:function(){return w}});var t=n(4051),s=n.n(t),a=n(5893),i=n(3299),o=n(1163),c=n(1664),l=n(7294),u=n(3399),d=n(7536),m=n(6375),f=n(782);function h(e,r,n,t,s,a,i){try{var o=e[a](i),c=o.value}catch(l){return void n(l)}o.done?r(c):Promise.resolve(c).then(t,s)}function p(e,r,n){return r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function v(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{},t=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),t.forEach((function(r){p(e,r,n[r])}))}return e}function w(){var e=(0,i.useSession)().data,r=(0,d.cI)(),n=r.handleSubmit,t=r.register,p=r.formState.errors,w=(0,o.useRouter)(),b=w.query.redirect;(0,l.useEffect)((function(){(null===e||void 0===e?void 0:e.user)&&w.push(b||"/")}),[w,e,b]);var x=function(){var e,r=(e=s().mark((function e(r){var n,t,a;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.email,t=r.password,e.prev=1,e.next=4,(0,i.signIn)("credentials",{redirect:!1,email:n,password:t});case 4:(a=e.sent).error&&f.Am.error(a.error),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),f.Am.error((0,m.b)(e.t0));case 11:case"end":return e.stop()}}),e,null,[[1,8]])})),function(){var r=this,n=arguments;return new Promise((function(t,s){var a=e.apply(r,n);function i(e){h(a,t,s,i,o,"next",e)}function o(e){h(a,t,s,i,o,"throw",e)}i(void 0)}))});return function(e){return r.apply(this,arguments)}}();return(0,a.jsx)(u.Z,{title:"Login",children:(0,a.jsxs)("form",{className:"mx-auto max-w-screen-md",onSubmit:n(x),children:[(0,a.jsx)("h1",{className:"mb-4 text-xl",children:"Login"}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{htmlFor:"email",children:"Email"}),(0,a.jsx)("input",v({type:"email",className:"w-full",id:"email",autoFocus:!0},t("email",{required:"Please enter email",pattern:{value:/^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+.[a-zA-Z0-9-.]+$/i,message:"Please enter valid email"}}))),p.email&&(0,a.jsx)("div",{className:"text-red-500",children:p.email.message})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{htmlFor:"password",children:"Password"}),(0,a.jsx)("input",v({className:"w-full",type:"password",id:"password"},t("password",{required:"Please enter password",minLength:{value:3,message:"password is more than 5 chars"}}))),p.password&&(0,a.jsx)("div",{className:"text-red-500 ",children:p.password.message})]}),(0,a.jsx)("div",{className:"mb-4 ",children:(0,a.jsx)("button",{className:"primary-button",children:"Login"})}),(0,a.jsxs)("div",{className:"mb-4 ",children:["Don't have an account? \xa0",(0,a.jsx)(c.default,{href:"/register?redirect=".concat(b||"/"),children:"Register"})]})]})})}}},function(e){e.O(0,[961,859,536,399,774,888,179],(function(){return r=7156,e(e.s=r);var r}));var r=e.O();_N_E=r}]);